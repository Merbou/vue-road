/*!
 * vue-road v1.0.4
 * (c) Merouane Boucenna
 * Released under the MIT License.
 */
function t(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function r(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function n(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return i(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var a=function(){function r(e){var n=this,i=e.router,a=e.middlewares,o=e.route;t(this,r),a&&o&&(this.middlewares=a,this.route=o,i.beforeEach((function(t,r,e){n.standrad({to:t,from:r,next:e},"before")})),i.afterEach((function(t,r){n.standrad({to:t,from:r},"after")})))}return e(r,[{key:"standrad",value:function(t,r){var e=this,n=t.to,i=t.from,a=t.next;this.route.get(!0).filter((function(t){return t.routes.findIndex((function(t){return t.path===n.path.split("/").slice(0,2).join("/")}))>-1})).flatMap((function(t){return t.middlewares})).forEach((function(t){Object.keys(e.middlewares).indexOf(t)>-1&&e.middlewares[t][r]&&("before"==r?e.middlewares[t][r]({to:n,from:i}).then((function(t){t===n.path?a():t?a(t):a()})).catch((function(t){res===n.path?a():a(t)})):e.middlewares[t][r]({to:n,from:i}))}))}}]),r}(),o=function(){function r(e,n){t(this,r),this.customRouteCase=n,this._rs_mds=[],this.ROUTES=[],e.call(this)}return e(r,[{key:"middleware",value:function(t){var r=t.router,e=t.middlewares;return new a({router:r,middlewares:e,route:this}),this}},{key:"route",value:function(t,r){var e=this.splitMiddleware(r);this.ROUTES.push({routes:t,middlewares:e});var n=this.customRouteCase?this.customRouteCase(t.map((function(t){return Object.assign({},t)}))):t;return this._rs_mds.push({routes:n,middlewares:e}),n}},{key:"splitMiddleware",value:function(t){try{if(Array.isArray(t))return t;if("string"==typeof t)return t.split(",");throw"middleware not valid"}catch(t){return["init"]}}},{key:"getMiddlewares",value:function(){return n(new Set(this.ROUTES.flatMap((function(t){return t.middlewares}))))}},{key:"get",value:function(t,r){return this.fiflater(this._rs_mds,t,r)}},{key:"constant",value:function(t,r){return this.fiflater(this.ROUTES,t,r)}},{key:"fiflater",value:function(t,r,e){var n;return e?(e=Array.isArray(e)?e:[e],n=t&&t.filter((function(t){return t.middlewares.filter((function(t){return e.indexOf(t)>-1})).length}))):n=t,r?n:n&&n.flatMap((function(t){return t.routes}))||[]}}]),r}();export default o;
//# sourceMappingURL=index.esm.js.map
